<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.eatit.mapper.PurchaseMapper">
  
	  <!-- 발주서 작성 -->
	  <insert id="insertForm">
	  		INSERT INTO purchase_order (company_no, member_no, product_no, due_date, comments)
	  		VALUES (#{company_no}, #{member_no}, #{product_no},#{due_date}, #{comments})
	  </insert>
	  
	  <!-- 내역 조회 -->
	  <select id="list" resultType="PurchaseVO">
	  		SELECT * FROM purchase_order
	  		WHERE delete_status = 0
	  </select>
	  
	  <!-- 주문 상세 조회 -->
	  <select id="readOrder" resultType="PurchaseVO">
	  		SELECT * FROM purchase_order
	  		WHERE order_id = #{order_id}
	  </select>
	  
	  <!-- 발주서 수정 -->
	  <update id="updateForm">
	  		UPDATE purchase_order SET due_date = #{due_date}, comments = #{comments}, update_date = NOW()
	  		WHERE order_id = #{order_id} 
	  </update>
	  
	  <!-- 발주서 삭제 -->
	  <update id="deleteForm">
	  		UPDATE purchase_order SET order_status = "취소", update_date = NOW(), delete_status = 1
	  		WHERE order_id = #{order_id}
	  </update>
	  
  </mapper>